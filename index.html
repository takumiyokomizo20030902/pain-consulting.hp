<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PainConsulting.Inc - AIとDXでビジネスの未来を創造する</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+JP:wght@400;500;700;900&family=Noto+Serif+JP:wght@700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- Swiper.js for Sliders -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <!-- three.js for Hero Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- highlight.js (for code blocks in Markdown) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" />

    <style>
        /* Custom Styles */
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
            background-color: #f0f4f8; /* Slightly off-white background */
            color: #1a202c;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .font-mincho {
            font-family: 'Noto Serif JP', serif;
        }
        
        /* Color Palette */
        .bg-navy { background-color: #0a142f; }
        .bg-sky { background-color: #0ea5e9; }
        .text-navy { color: #0a142f; }
        .text-sky { color: #0ea5e9; }
        .border-sky { border-color: #0ea5e9; }

        /* Header */
        .header-scrolled {
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-bottom: 1px solid #e2e8f0;
        }
        .header-scrolled .nav-link, .header-scrolled .company-name { color: #0a142f; }
        .header-scrolled #mobile-menu-button i { color: #0a142f; }


        /* Hero Section */
        .hero-section {
            position: relative;
            background-color: #0a142f;
            overflow: hidden;
        }
        #hero-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .hero-content {
            position: relative;
            z-index: 2;
        }

        /* Animations */
        .reveal {
            opacity: 0;
            transform: translateY(60px);
            transition: opacity 1.2s cubic-bezier(0.165, 0.84, 0.44, 1), transform 1.2s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        .reveal-fast { transition-delay: 0.2s; }
        .reveal-medium { transition-delay: 0.4s; }
        .reveal-slow { transition-delay: 0.6s; }
        
        /* Section Title */
        .section-title::after {
            content: ''; display: block; width: 60px; height: 4px;
            background-color: #0ea5e9; margin: 16px auto 0; border-radius: 2px;
        }
        
        /* Geometric Background Pattern */
        .geometric-bg {
            background-color: #ffffff;
            background-image:
                linear-gradient(rgba(14, 165, 233, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(14, 165, 233, 0.05) 1px, transparent 1px);
            background-size: 60px 60px;
        }
        
        /* Swiper.js Slider Styles */
        .swiper {
             width: 100%;
             height: 100%;
             padding-bottom: 50px !important; /* Ensure space for pagination */
        }

        .swiper-slide {
            height: auto;
            display: flex;
            justify-content: center;
            align-items: stretch; /* Make cards in a row equal height */
        }

        .swiper-pagination-bullet-active { background-color: #0ea5e9 !important; }
        .swiper-button-next, .swiper-button-prev { color: #0a142f !important; transform: scale(0.8); }
        .swiper-button-next:hover, .swiper-button-prev:hover { color: #0ea5e9 !important; }


        /* Card Styles */
        .h-tech-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                        box-shadow 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                        border-color 0.35s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%; /* Ensure card takes full height of the slide */
        }
        .h-tech-card:hover {
            transform: translateY(-10px);
            border-color: rgba(14, 165, 233, 0.5);
            box-shadow: 0 15px 35px rgba(14, 165, 233, 0.15);
        }

        .case-card {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .case-card .img-container {
            height: 220px;
            overflow: hidden;
        }
        .case-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease-in-out;
        }
        .case-card:hover img {
            transform: scale(1.05);
        }

        /* Form Styling */
        .form-input {
            transition: border-color .3s ease;
        }
        .form-input:focus {
            border-color: #0ea5e9;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
            outline: none;
        }

        /* Training modal transitions */
        #training-modal-backdrop { opacity: 0; transition: opacity 200ms ease; }
        #training-modal.is-open #training-modal-backdrop { opacity: 1; }
        #training-modal-panel { opacity: 0; transform: translateY(10px) scale(0.98); transition: opacity 220ms ease, transform 220ms ease; }
        #training-modal.is-open #training-modal-panel { opacity: 1; transform: translateY(0) scale(1); }

        /* Toggle (details/summary) styling */
        details.toggle-card { border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #fff; box-shadow: 0 6px 18px rgba(2,6,23,0.06); }
        details.toggle-card + details.toggle-card { margin-top: 14px; }
        details.toggle-card[open] { box-shadow: 0 10px 24px rgba(2,6,23,0.08); border-color: #cbd5e1; }
        summary.toggle-summary { list-style: none; cursor: pointer; padding: 14px 18px; display: flex; align-items: center; justify-content: space-between; gap: 12px; background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%); }
        summary.toggle-summary::-webkit-details-marker { display: none; }
        .ts-left { display:flex; align-items:center; gap:12px; min-width:0; }
        .ts-title { color:#0a142f; font-weight: 700; }
        .ts-sub { color:#475569; font-size: 12px; font-weight:600; background:#e2e8f0; padding:2px 8px; border-radius:999px; }
        .ts-right { display:flex; align-items:center; gap:10px; }
        .ts-badge { font-size: 11px; font-weight:700; color:#0369a1; background:#e0f2fe; border:1px solid #bae6fd; padding:4px 8px; border-radius:999px; }
        .ts-chevron { transition: transform 200ms ease, color 200ms ease; color:#64748b; }
        details[open] .ts-chevron { transform: rotate(180deg); color:#0ea5e9; }
        .training-md-content { line-height: 1.7; color:#334155; }
        .training-md-content h1, .training-md-content h2, .training-md-content h3 { color:#0a142f; margin: 1.2em 0 0.5em; font-weight:800; }
        .training-md-content h1 { font-size:1.5rem; }
        .training-md-content h2 { font-size:1.25rem; }
        .training-md-content h3 { font-size:1.125rem; }
        .training-md-content p { margin: 0.5em 0; }
        .training-md-content ul { margin: 0.5em 0 0.5em 1.2em; list-style: disc; }
        .training-md-content ol { margin: 0.5em 0 0.5em 1.2em; list-style: decimal; }
        .training-md-content code { background:#f1f5f9; border:1px solid #e2e8f0; border-radius:6px; padding:2px 6px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 0.9em; }
        .training-md-content table { width:100%; border-collapse: collapse; margin: 0.75em 0; }
        .training-md-content th, .training-md-content td { border:1px solid #e2e8f0; padding:8px 10px; }
        .training-md-content th { background:#f8fafc; text-align:left; }
        .training-md-content tr:nth-child(even) { background:#f9fafb; }
        .training-md-content a { color:#0369a1; text-decoration: underline; text-underline-offset: 2px; }
        .training-md-content a:hover { color:#0ea5e9; }
        .training-md-content blockquote { border-left:4px solid #0ea5e9; background:#f0f9ff; padding:12px 16px; border-radius:8px; margin: 0.75em 0; color:#0f172a; }
        .training-md-content hr { border:0; border-top:1px solid #e2e8f0; margin: 1.25rem 0; }
        .training-md-content img { max-width:100%; height:auto; border-radius:10px; box-shadow: 0 8px 24px rgba(2,6,23,0.12); margin: 0.5rem 0; }
        .training-md-content pre { overflow-x:auto; border-radius:10px; border:1px solid #e2e8f0; }
        /* Fade-in for loaded content */
        .training-md-content { animation: mdFadeIn 220ms ease; }
        @keyframes mdFadeIn { from { opacity:0; transform: translateY(4px);} to { opacity:1; transform: translateY(0);} }

        /* Card style for top-level numbered items */
        .training-md-content > ol { counter-reset: item; margin: 0.75em 0; padding-left: 0; }
        .training-md-content > ol > li {
            list-style: none;
            counter-increment: item;
            position: relative;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px 16px 16px 64px;
            margin: 12px 0;
            box-shadow: 0 6px 18px rgba(2,6,23,0.06);
        }
        .training-md-content > ol > li::before {
            content: counter(item);
            position: absolute;
            left: 16px;
            top: 16px;
            width: 36px; height: 36px;
            border-radius: 9999px;
            background: #0ea5e9;
            color: #fff;
            font-weight: 800;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 16px rgba(14,165,233,0.35);
        }
        .training-md-content > ol > li h1,
        .training-md-content > ol > li h2,
        .training-md-content > ol > li h3 { margin-top: 0; }
        .training-md-content > ol > li ul { margin-left: 1rem; }

        /* Auto-generated training cards (from plain paragraphs) */
        .training-card { background:#fff; border:1px solid #e2e8f0; border-radius:14px; box-shadow: 0 8px 22px rgba(2,6,23,0.08); padding: 16px; margin: 14px 0; }
        .training-card .tc-head { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; }
        .training-card .tc-title { font-weight:800; color:#0a142f; display:flex; align-items:center; gap:10px; }
        .training-card .tc-num { width:32px; height:32px; display:inline-flex; align-items:center; justify-content:center; border-radius:9999px; background:#0ea5e9; color:#fff; font-weight:800; box-shadow: 0 6px 16px rgba(14,165,233,0.35); }
        .training-card .tc-meta { display:flex; align-items:center; gap:8px; }
        .training-card .tc-badge { font-size:12px; font-weight:700; padding:4px 8px; border-radius:9999px; border:1px solid #bae6fd; background:#e0f2fe; color:#0369a1; white-space:nowrap; }
        .training-card .tc-desc { color:#334155; margin: 6px 0 10px; }
        .training-card .tc-list { margin: 8px 0 4px 0; padding-left: 1.1rem; }
        .training-card .tc-list li { list-style: disc; margin: 6px 0; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- ===== Header Section ===== -->
    <header id="header" class="text-white fixed w-full top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-xl md:text-2xl font-bold company-name transition-colors duration-300">
                <a href="#">PainConsulting.Inc</a>
            </div>
            <nav class="hidden md:flex items-center space-x-6 text-sm">
                <a href="#philosophy" class="nav-link transition-colors duration-300 hover:text-sky-400">PHILOSOPHY</a>
                <a href="#strengths" class="nav-link transition-colors duration-300 hover:text-sky-400">STRENGTHS</a>
                <a href="#services" class="nav-link transition-colors duration-300 hover:text-sky-400">SERVICES</a>
                <a href="#cases" class="nav-link transition-colors duration-300 hover:text-sky-400">PROJECTS</a>
                <a href="#company" class="nav-link transition-colors duration-300 hover:text-sky-400">COMPANY</a>
                <a href="#contact" class="bg-sky-500 text-white px-5 py-2 rounded-full font-bold hover:bg-sky-600 transition-all shadow-md hover:shadow-lg">CONTACT</a>
            </nav>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="focus:outline-none"><i class="fas fa-bars fa-2x transition-colors duration-300"></i></button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-navy/95 backdrop-blur-sm">
            <a href="#philosophy" class="mobile-nav-link block text-center py-4 text-sm hover:bg-sky-500/20 transition-colors duration-200">PHILOSOPHY</a>
            <a href="#strengths" class="mobile-nav-link block text-center py-4 text-sm hover:bg-sky-500/20 transition-colors duration-200">STRENGTHS</a>
            <a href="#services" class="mobile-nav-link block text-center py-4 text-sm hover:bg-sky-500/20 transition-colors duration-200">SERVICES</a>
            <a href="#cases" class="mobile-nav-link block text-center py-4 text-sm hover:bg-sky-500/20 transition-colors duration-200">PROJECTS</a>
            <a href="#company" class="mobile-nav-link block text-center py-4 text-sm hover:bg-sky-500/20 transition-colors duration-200">COMPANY</a>
            <a href="#contact" class="mobile-nav-link block text-center bg-sky-500 py-4 text-sm font-bold hover:bg-sky-600 transition-colors duration-200">CONTACT</a>
        </div>
    </header>

    <main>
        <!-- ===== Hero Section ===== -->
        <section class="hero-section h-screen flex items-center justify-center text-white text-center">
            <canvas id="hero-canvas"></canvas>
            <div class="hero-content p-4">
                <h1 class="text-4xl md:text-6xl font-black leading-tight mb-6 reveal font-mincho">AIの民主化で、<br>日本の<span class="text-sky-300">生産性</span>を向上させる。</h1>
                <p class="text-base md:text-lg max-w-3xl mx-auto mb-10 text-gray-300 reveal reveal-fast">私たちは、最先端のAI技術を誰もが利用できる形にし、<br class="hidden sm:block">日本全体の生産性向上に貢献します。</p>
                <a href="#services" class="bg-sky-500 text-white font-bold py-4 px-10 rounded-full text-lg hover:bg-sky-600 transition-all duration-300 transform hover:scale-105 reveal reveal-medium shadow-lg hover:shadow-sky-500/40">事業内容を見る</a>
            </div>
        </section>

        <!-- ===== Philosophy Section ===== -->
        <section id="philosophy" class="py-20 md:py-28 geometric-bg">
            <div class="container mx-auto px-6 text-center relative z-10">
                <h2 class="text-3xl md:text-4xl font-bold text-navy section-title reveal">Philosophy</h2>
                <p class="mt-12 text-xl md:text-2xl font-medium leading-relaxed max-w-4xl mx-auto reveal reveal-fast">「高い専門性」と「多角的ソリューション」で、<br class="md:hidden">DXを民主化する</p>
                <div class="mt-12 grid md:grid-cols-3 gap-8 max-w-6xl mx-auto text-left">
                    <div class="h-tech-card p-6 rounded-lg reveal">
                        <div class="text-sky-500 text-3xl mb-3"><i class="fa-solid fa-lightbulb"></i></div>
                        <h3 class="font-bold text-lg mb-2 text-navy">ボトルネックの解消</h3>
                        <p class="text-gray-600 leading-relaxed text-sm">表面的な問題解決に留まらず、ビジネスの根幹に潜む真のボトルネックを特定します。業務フローの徹底的な可視化とデータ分析に基づき、非効率なプロセスや構造的な課題を浮き彫りにし、持続可能な成長を可能にするための本質的なソリューションをご提案します。</p>
                    </div>
                    <div class="h-tech-card p-6 rounded-lg reveal reveal-medium">
                        <div class="text-sky-500 text-3xl mb-3"><i class="fa-solid fa-people-group"></i></div>
                        <h3 class="font-bold text-lg mb-2 text-navy">DXの民主化</h3>
                        <p class="text-gray-600 leading-relaxed text-sm">最先端のテクノロジーは、一部の巨大企業だけのものではありません。私たちは、AIやDXの専門知識を、あらゆる規模・業種の企業様にとって分かりやすく、導入しやすい形で提供します。真のパートナーとして伴走し、テクノロジーの恩恵をすべてのビジネスへ届けることが私たちの使命です。</p>
                    </div>
                    <div class="h-tech-card p-6 rounded-lg reveal reveal-slow">
                        <div class="text-sky-500 text-3xl mb-3"><i class="fa-solid fa-handshake-angle"></i></div>
                        <h3 class="font-bold text-lg mb-2 text-navy">最適な人材マッチング</h3>
                        <p class="text-gray-600 leading-relaxed text-sm">DXプロジェクトの成否は、技術だけでなく「人」に大きく左右されます。私たちは、お客様の企業文化やプロジェクトの特性を深く理解した上で、豊富なネットワークから最適なスキルとマインドセットを持つ専門人材をマッチング。チームの一員としてプロジェクトを成功に導きます。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== Strengths Section ===== -->
        <section id="strengths" class="py-20 md:py-28 bg-gray-100">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy section-title reveal">Our Strengths</h2>
                    <p class="mt-4 text-gray-600 reveal reveal-fast">世界有数の研究実績と技術力で、お客様の課題を解決します。</p>
                </div>
                <div class="mt-16 grid md:grid-cols-3 gap-8 max-w-6xl mx-auto text-center">
                     <div class="h-tech-card p-6 rounded-lg reveal">
                        <div class="text-sky-500 text-4xl mb-4"><i class="fas fa-cubes"></i></div>
                        <h3 class="font-bold text-lg mb-2 text-navy">カスタムモデル構築</h3>
                        <p class="text-gray-600 leading-relaxed text-sm">既存APIの統合に留まらず、クライアントの課題に特化した機械学習モデルを一から設計・開発。高精度なソリューションを実現します。</p>
                    </div>
                     <div class="h-tech-card p-6 rounded-lg reveal reveal-medium">
                        <div class="text-sky-500 text-4xl mb-4"><i class="fas fa-rss"></i></div>
                        <h3 class="font-bold text-lg mb-2 text-navy">最新情報のキャッチアップ</h3>
                        <p class="text-gray-600 leading-relaxed text-sm">日々進化するAI技術の最先端を常に追跡。国際学会での発表や最新論文の知見を、最速でお客様のソリューションに反映します。</p>
                    </div>
                    <div class="h-tech-card p-6 rounded-lg reveal reveal-slow">
                        <div class="text-sky-500 text-4xl mb-4"><i class="fas fa-server"></i></div>
                        <h3 class="font-bold text-lg mb-2 text-navy">柔軟なインフラ対応</h3>
                        <p class="text-gray-600 leading-relaxed text-sm">Google Cloud, AWS, Azure等のクラウドからオンプレミスまで、顧客のニーズに合わせた最適なインフラ構成を提案・構築します。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== Services Section ===== -->
        <section id="services" class="py-20 md:py-28 geometric-bg">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy section-title reveal">Our Services</h2>
                    <p class="mt-4 text-gray-600 reveal reveal-fast">お客様の課題に合わせた最適なソリューションをワンストップで提供します。</p>
                </div>
                <div class="mt-16 reveal">
                     <div class="swiper services-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?q=80&w=800&auto=format&fit=crop" alt="AI・ソフトウェア開発" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <h3 class="text-xl font-bold my-2 text-navy">AI・ソフトウェア開発</h3>
                                        <p class="text-sm text-gray-700 flex-grow">業務自動化AIから需要予測、画像認識まで、オーダーメイドのAI・ソフトウェア開発でビジネスを加速させます。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?q=80&w=800&auto=format&fit=crop" alt="DXコンサルティング" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <h3 class="text-xl font-bold my-2 text-navy">DXコンサルティング</h3>
                                        <p class="text-sm text-gray-700 flex-grow">現状分析から戦略立案、実行支援まで。お客様に寄り添い、全社的なデジタルトランスフォーメーションを成功に導きます。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1513258496099-48168024aec0?q=80&w=800&auto=format&fit=crop" alt="AI研修" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <h3 class="text-xl font-bold my-2 text-navy">AI研修</h3>
                                        <p class="text-sm text-gray-700">全社員向けのリテラシー向上研修からエンジニア向けの専門研修まで、AIを使いこなす人材を育成します。</p>
                                        <div class="mt-4">
                                            <button id="open-training-modal" class="bg-sky-500 text-white font-bold py-2.5 px-6 rounded-full text-sm hover:bg-sky-600 transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-sky-500/40">詳細はこちら</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?q=80&w=800&auto=format&fit=crop" alt="人材採用支援" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <h3 class="text-xl font-bold my-2 text-navy">人材採用支援</h3>
                                        <p class="text-sm text-gray-700 flex-grow">DX、AI人材の採用に特化。独自のネットワークとノウハウで、貴社の成長を担う優秀な人材の採用を支援します。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1551434678-e076c223a692?q=80&w=800&auto=format&fit=crop" alt="各種マーケティング支援" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <h3 class="text-xl font-bold my-2 text-navy">各種マーケティング支援</h3>
                                        <p class="text-sm text-gray-700 flex-grow">データ分析に基づく戦略策定から、デジタル広告、SNS運用、コンテンツマーケティングの実行までを一気通貫で支援します。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-pagination"></div>
                        <div class="swiper-button-next"></div><div class="swiper-button-prev"></div>
                    </div>
                </div>
            </div>
        </section>

        

        <!-- ===== Projects Section ===== -->
        <section id="cases" class="py-20 md:py-28 bg-gray-100">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy section-title reveal">Projects</h2>
                    <p class="mt-4 text-gray-600 reveal reveal-fast">様々な業界で、課題解決と事業成長を実現しています。</p>
                </div>
                <div class="mt-16 reveal">
                    <div class="swiper cases-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide p-2">
                                 <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?q=80&w=2070&auto=format&fit=crop" alt="顧客対応AI" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">ゴルフ会員権売買</span><h3 class="text-xl font-bold my-2 text-navy">顧客対応AI (メール返信AI)</h3>
                                        <p class="text-sm text-gray-700 flex-grow">LINEやメールでの顧客対応をAIで自動化し、営業・CS部門のコア業務への集中と業務効率化を実現しました。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                 <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=2070&auto=format&fit=crop" alt="住宅内観・外観変換AI" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">大手建材メーカー</span><h3 class="text-xl font-bold my-2 text-navy">住宅内観・外観変換AI</h3>
                                        <p class="text-sm text-gray-700 flex-grow">リフォーム後の内装イメージをAIで即座に生成。顧客への視覚的な完成イメージ共有を促進し、提案の質を向上させました。</p>
                                    </div>
                                </div>
                            </div>
                             <div class="swiper-slide p-2">
                                 <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1559757148-5c350d0d3c56?q=80&w=2070&auto=format&fit=crop" alt="AI薬機くん" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">薬機法コンサル会社</span><h3 class="text-xl font-bold my-2 text-navy">AI薬機くん</h3>
                                        <p class="text-sm text-gray-700 flex-grow">複雑な薬機法の広告表示規制に関する疑問を解決するチャットボットを開発。ガイドラインに準拠した適切な情報提供を実現しました。</p>
                                    </div>
                                </div>
                            </div>
                             <div class="swiper-slide p-2">
                                 <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?q=80&w=2070&auto=format&fit=crop" alt="AIリスキリング教材" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">ソフトウェア開発会社</span><h3 class="text-xl font-bold my-2 text-navy">AIリスキリング教材 監修</h3>
                                        <p class="text-sm text-gray-700 flex-grow">社員のAIスキル向上のため、基礎から応用まで体系的に学べるリスキリング教材を監修しました。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1554224154-26032ffc0d07?q=80&w=2072&auto=format&fit=crop" alt="税理士・会計士特化型AI研修" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">税理士・会計士事務所</span><h3 class="text-xl font-bold my-2 text-navy">税理士・会計士特化型AI研修</h3>
                                        <p class="text-sm text-gray-700 flex-grow">会計処理の効率化、顧客データ分析、資料作成、提案の草案作成などをAIで支援し、専門業務の高度化を実現します。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1589829545856-d10d557cf95f?q=80&w=2070&auto=format&fit=crop" alt="法律事務所特化型AI研修" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">法律事務所</span><h3 class="text-xl font-bold my-2 text-navy">法律事務所特化型AI研修</h3>
                                        <p class="text-sm text-gray-700 flex-grow">議事録作成、法律・判例リサーチ、資格不要業務の自動化などを通じ、弁護士がより戦略的な業務に集中できる環境を構築します。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1552664730-d307ca884978?q=80&w=2070&auto=format&fit=crop" alt="営業職特化型AI研修" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">営業部門</span><h3 class="text-xl font-bold my-2 text-navy">営業職特化型AI研修</h3>
                                        <p class="text-sm text-gray-700 flex-grow">日程調整、顧客データ分析、SNS運用などをAIで効率化。営業担当者が顧客との関係構築に注力できるよう支援します。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1551434678-e076c223a692?q=80&w=2070&auto=format&fit=crop" alt="生成AIコンサルティング" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">全業種対応</span><h3 class="text-xl font-bold my-2 text-navy">生成AIコンサルティング</h3>
                                        <p class="text-sm text-gray-700 flex-grow">最新AI情報のキャッチアップから業務への落とし込みまでを一貫してサポート。非効率な日常業務へ定期的なソリューションを提案します。</p>
                                    </div>
                                </div>
                            </div>
                            <!-- New Industry Cases Start -->
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?q=80&w=2070&auto=format&fit=crop" alt="現場管理AI" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">建設業</span><h3 class="text-xl font-bold my-2 text-navy">現場管理AI</h3>
                                        <p class="text-sm text-gray-700 flex-grow">AIが工程・リスクを予測し、ドローンで品質検査を自動化。安全管理も強化し、現場の生産性を向上させます。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?q=80&w=2070&auto=format&fit=crop" alt="物流最適化AI" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">物流業</span><h3 class="text-xl font-bold my-2 text-navy">物流最適化AI</h3>
                                        <p class="text-sm text-gray-700 flex-grow">AIが輸送計画や配車を最適化し、GPSで荷物を追跡。ドライバーの安全も管理し、業務の効率化と品質向上を実現します。</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide p-2">
                                <div class="case-card h-tech-card rounded-xl">
                                    <div class="img-container rounded-t-xl"><img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?q=80&w=2070&auto=format&fit=crop" alt="品質管理AI" class="w-full rounded-t-xl"></div>
                                    <div class="p-8 text-left flex-grow flex flex-col">
                                        <span class="text-sky-500 font-bold text-sm">製造業</span><h3 class="text-xl font-bold my-2 text-navy">品質管理AI</h3>
                                        <p class="text-sm text-gray-700 flex-grow">品質検査の自動化、生産計画の最適化、ベテランの技術継承をAIで支援し、現場の生産性向上に貢献します。</p>
                                    </div>
                                </div>
                            </div>
                            <!-- New Industry Cases End -->
                        </div>
                        <div class="swiper-pagination"></div>
                        <div class="swiper-button-next"></div><div class="swiper-button-prev"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== Company Profile Section ===== -->
        <section id="company" class="py-20 md:py-28 geometric-bg">
            <div class="container mx-auto px-6">
                <div class="text-center"><h2 class="text-3xl md:text-4xl font-bold text-navy section-title reveal">Company Profile</h2></div>
                <div class="max-w-4xl mx-auto mt-16 bg-white/80 backdrop-blur-sm p-8 rounded-xl border border-gray-200 shadow-sm reveal reveal-fast">
                    <dl class="text-sm md:text-base">
                        <div class="py-5 flex flex-col md:flex-row border-b border-gray-200"><dt class="font-bold w-full md:w-1/4 mb-1 md:mb-0 text-navy">会社名</dt><dd class="w-full md:w-3/4">株式会社PainConsulting</dd></div>
                        <div class="py-5 flex flex-col md:flex-row border-b border-gray-200"><dt class="font-bold w-full md:w-1/4 mb-1 md:mb-0 text-navy">代表者</dt><dd class="w-full md:w-3/4">代表取締役 横溝 匠</dd></div>
                        <div class="py-5 flex flex-col md:flex-row border-b border-gray-200"><dt class="font-bold w-full md:w-1/4 mb-1 md:mb-0 text-navy">事業内容</dt><dd class="w-full md:w-3/4">AI開発, DXコンサルティング, AI研修, 人材採用, マーケティング支援</dd></div>
                        <div class="py-5 flex flex-col md:flex-row"><dt class="font-bold w-full md:w-1/4 mb-1 md:mb-0 text-navy">お問い合わせ</dt><dd class="w-full md:w-3/4"><p><i class="fa-solid fa-envelope w-5 mr-1 text-sky-500"></i> <a href="mailto:yokomizo.takumi@pain-consulting.com" class="hover:text-sky-500 transition-colors">yokomizo.takumi@pain-consulting.com</a></p><p class="mt-2"><i class="fa-solid fa-phone w-5 mr-1 text-sky-500"></i> <a href="tel:07089074730" class="hover:text-sky-500 transition-colors">070-8907-4730</a></p></dd></div>
                    </dl>
                </div>
            </div>
        </section>

        <!-- ===== Contact Form Section ===== -->
        <section id="contact" class="py-20 md:py-28 bg-navy text-white">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold section-title reveal">Contact Us</h2>
                    <p class="mt-4 text-gray-300 max-w-2xl mx-auto reveal reveal-fast">まずはお気軽にご相談ください。お客様のビジネスに最適なソリューションをご提案します。</p>
                </div>
                <div class="max-w-2xl mx-auto mt-12 reveal reveal-medium">
                    <div class="bg-gray-800/60 border border-gray-700 rounded-xl p-8 text-center">
                        <a href="https://forms.gle/hcGuiAyvWETQinbX8" target="_blank" rel="noopener" class="inline-block bg-sky-500 text-white font-bold py-3 px-10 rounded-full text-lg hover:bg-sky-600 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-sky-500/40">
                            お問い合わせはこちら
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

        <!-- ===== AI Training Modal ===== -->
        <div id="training-modal" class="fixed inset-0 hidden" aria-hidden="true">
            <div id="training-modal-backdrop" class="absolute inset-0 bg-black/60"></div>
            <div class="absolute inset-0 flex items-center justify-center p-4">
                <div id="training-modal-panel" class="bg-white rounded-xl w-full max-w-3xl max-h-[85vh] overflow-y-auto shadow-2xl">
                    <div class="flex items-center justify-between px-6 py-4 border-b">
                        <h3 class="text-lg md:text-xl font-bold text-navy">AI研修の詳細</h3>
                        <button type="button" class="text-gray-500 hover:text-gray-700 text-2xl leading-none" data-close-training-modal aria-label="閉じる">×</button>
                    </div>
                    <div class="p-6 space-y-4">
                        <details class="toggle-card" data-md-path="kensyu-ai-business.md">
                            <summary class="toggle-summary">
                                <span class="ts-left">
                                    <span class="ts-icon text-sky-600"><i class="fa-solid fa-briefcase"></i></span>
                                    <span class="ts-title">AIビジネス基礎</span>
                                    <span class="ts-sub">基礎〜応用</span>
                                </span>
                                <span class="ts-right">
                                    <span class="ts-badge">標準学生時間12h</span>
                                    <i class="fa-solid fa-chevron-down ts-chevron"></i>
                                </span>
                            </summary>
                            <div class="p-4 training-md-content"></div>
                        </details>
                        <details class="toggle-card" data-md-path="kensyu-copilot.md">
                            <summary class="toggle-summary">
                                <span class="ts-left">
                                    <span class="ts-icon text-indigo-600"><i class="fa-solid fa-code"></i></span>
                                    <span class="ts-title">GitHub Copilot活用</span>
                                    <span class="ts-sub">開発効率化</span>
                                </span>
                                <span class="ts-right">
                                    <span class="ts-badge">標準学生時間5h</span>
                                    <i class="fa-solid fa-chevron-down ts-chevron"></i>
                                </span>
                            </summary>
                            <div class="p-4 training-md-content"></div>
                        </details>
                        <details class="toggle-card" data-md-path="kensyu-notion.md">
                            <summary class="toggle-summary">
                                <span class="ts-left">
                                    <span class="ts-icon text-emerald-600"><i class="fa-solid fa-note-sticky"></i></span>
                                    <span class="ts-title">Notion AI活用</span>
                                    <span class="ts-sub">ナレッジ管理</span>
                                </span>
                                <span class="ts-right">
                                    <span class="ts-badge">標準学生時間5h</span>
                                    <i class="fa-solid fa-chevron-down ts-chevron"></i>
                                </span>
                            </summary>
                            <div class="p-4 training-md-content"></div>
                        </details>
                        <details class="toggle-card" data-md-path="kensyu-google-workspace-ai.md">
                            <summary class="toggle-summary">
                                <span class="ts-left">
                                    <span class="ts-icon text-amber-600"><i class="fa-solid fa-envelope-open-text"></i></span>
                                    <span class="ts-title">Google Workspace AI活用</span>
                                    <span class="ts-sub">Docs/Sheets/Slides</span>
                                </span>
                                <span class="ts-right">
                                    <span class="ts-badge">標準学生時間5h</span>
                                    <i class="fa-solid fa-chevron-down ts-chevron"></i>
                                </span>
                            </summary>
                            <div class="p-4 training-md-content"></div>
                        </details>
                    </div>
                </div>
            </div>
        </div>

    <!-- ===== Footer Section ===== -->
    <footer class="bg-gray-900 text-gray-400 py-12">
        <div class="container mx-auto px-6 text-center">
            <div class="mb-6"><p class="font-bold text-lg text-white">株式会社PainConsulting</p></div>
            <div class="flex justify-center space-x-6 mb-8">
                <a href="https://www.instagram.com/mizonokuchi__029?igsh=cHlsOHJ3bGh3c2hu&utm_source=qr" target="_blank" class="text-2xl hover:text-sky-400 transition-colors"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://www.facebook.com/share/1Hmc62fJT2/?mibextid=wwXIfr" target="_blank" class="text-2xl hover:text-sky-400 transition-colors"><i class="fa-brands fa-facebook"></i></a>
            </div>
            <p class="text-sm">&copy; 2024 株式会社PainConsulting. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Mobile Menu Functionality ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuIcon = mobileMenuButton.querySelector('i');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            
            mobileMenuButton.addEventListener('click', () => {
                const isHidden = mobileMenu.classList.contains('hidden');
                mobileMenu.classList.toggle('hidden');
                mobileMenuIcon.classList.toggle('fa-bars', !isHidden);
                mobileMenuIcon.classList.toggle('fa-times', isHidden);
            });
            
            function smoothScrollTo(targetId) {
                 const targetElement = document.querySelector(targetId);
                 if (targetElement) {
                     targetElement.scrollIntoView({ behavior: 'smooth' });
                 }
            }

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetId = link.getAttribute('href');
                    if (targetId.startsWith('#')) {
                        e.preventDefault();
                        smoothScrollTo(targetId);
                    }
                    mobileMenu.classList.add('hidden');
                    mobileMenuIcon.classList.remove('fa-times');
                    mobileMenuIcon.classList.add('fa-bars');
                });
            });

            // Smooth scroll for desktop nav links
            document.querySelectorAll('header nav a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    smoothScrollTo(this.getAttribute('href'));
                });
            });


            // --- Header Scroll Effect ---
            const header = document.getElementById('header');
            const mobileMenuButtonIcon = document.getElementById('mobile-menu-button').querySelector('i');

            const handleHeaderScroll = () => {
                const scrolled = window.scrollY > 50;
                header.classList.toggle('header-scrolled', scrolled);
                // Also change the mobile menu icon color if the header is scrolled but the menu is not open
                if (!mobileMenu.classList.contains('hidden')) return;
                mobileMenuButtonIcon.style.color = scrolled ? '#0a142f' : 'white';
            };
            window.addEventListener('scroll', handleHeaderScroll);
            handleHeaderScroll();

            // --- Scroll Reveal Animation ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            
            // --- Hero Animation (three.js) ---
            let scene, camera, renderer, particles, lines;
            const heroSection = document.querySelector('.hero-section');
            if (heroSection) {
                 function initHeroAnimation() {
                    scene = new THREE.Scene();
                    camera = new THREE.PerspectiveCamera(75, heroSection.offsetWidth / heroSection.offsetHeight, 0.1, 1000);
                    renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('hero-canvas'), alpha: true });
                    renderer.setSize(heroSection.offsetWidth, heroSection.offsetHeight);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

                    const points = [];
                    const numPoints = window.innerWidth < 768 ? 150 : 300;
                    for (let i = 0; i < numPoints; i++) {
                        const x = THREE.MathUtils.randFloatSpread(200);
                        const y = THREE.MathUtils.randFloatSpread(200);
                        const z = THREE.MathUtils.randFloatSpread(-200, 50);
                        points.push(new THREE.Vector3(x, y, z));
                    }
                    const geometry = new THREE.BufferGeometry().setFromPoints(points);
                    const material = new THREE.PointsMaterial({ 
                        color: 0x0ea5e9, 
                        size: 1.5, 
                        transparent: true, 
                        opacity: 0.4,
                        blending: THREE.AdditiveBlending 
                    });
                    particles = new THREE.Points(geometry, material);
                    scene.add(particles);

                    camera.position.z = 100;
                }

                const mouse = new THREE.Vector2();
                function onMouseMove(event) {
                    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                }
                window.addEventListener('mousemove', onMouseMove);
                
                const clock = new THREE.Clock();
                function animate() {
                    if (!renderer) return;
                    requestAnimationFrame(animate);

                    const elapsedTime = clock.getElapsedTime();
                    particles.rotation.y = elapsedTime * 0.05;

                    camera.position.x += (mouse.x * 15 - camera.position.x) * 0.03;
                    camera.position.y += (-mouse.y * 15 - camera.position.y) * 0.03;
                    camera.lookAt(scene.position);

                    renderer.render(scene, camera);
                }

                function onResize() {
                    if (!renderer) return;
                    camera.aspect = heroSection.offsetWidth / heroSection.offsetHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(heroSection.offsetWidth, heroSection.offsetHeight);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                }
                window.addEventListener('resize', onResize);

                initHeroAnimation();
                animate();
            }

            // Contact form removed; Google Form is used instead.


            // --- Swiper.js Initialization ---
            const servicesSwiper = new Swiper('.services-swiper', {
                loop: true,
                slidesPerView: 1,
                spaceBetween: 20,
                pagination: { el: '.swiper-pagination', clickable: true },
                navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
                breakpoints: {
                    768: { slidesPerView: 2, spaceBetween: 25 },
                    1024: { slidesPerView: 3, spaceBetween: 30 },
                },
                 autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
            });

            const casesSwiper = new Swiper('.cases-swiper', {
                loop: true,
                slidesPerView: 1,
                spaceBetween: 20,
                pagination: { el: '.swiper-pagination', clickable: true },
                navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
                 breakpoints: {
                    640: { slidesPerView: 2, spaceBetween: 25 },
                    1024: { slidesPerView: 3, spaceBetween: 30 },
                },
                autoplay: {
                    delay: 4500,
                    disableOnInteraction: false,
                },
            });

            // --- AI Training Modal ---
            const trainingModal = document.getElementById('training-modal');
            const openTrainingBtn = document.getElementById('open-training-modal');
            const closeTrainingBtn = trainingModal ? trainingModal.querySelector('[data-close-training-modal]') : null;
            const trainingBackdrop = document.getElementById('training-modal-backdrop');

            function openTrainingModal() {
                if (!trainingModal) return;
                trainingModal.classList.remove('hidden');
                // allow next frame for transitions
                requestAnimationFrame(() => trainingModal.classList.add('is-open'));
                document.body.style.overflow = 'hidden';
            }

            function closeTrainingModal() {
                if (!trainingModal) return;
                trainingModal.classList.remove('is-open');
                const onEnd = () => {
                    trainingModal.classList.add('hidden');
                    document.body.style.overflow = '';
                    trainingModal.removeEventListener('transitionend', onEnd);
                };
                trainingModal.addEventListener('transitionend', onEnd);
            }

            if (openTrainingBtn) {
                openTrainingBtn.addEventListener('click', openTrainingModal);
            }
            if (closeTrainingBtn) {
                closeTrainingBtn.addEventListener('click', closeTrainingModal);
            }
            if (trainingBackdrop) {
                trainingBackdrop.addEventListener('click', closeTrainingModal);
            }
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeTrainingModal();
            });

            // Lazy-load and render Markdown on first expand
            function loadMarked() {
                return new Promise((resolve, reject) => {
                    if (window.marked) return resolve(window.marked);
                    const s = document.createElement('script');
                    s.src = 'https://cdn.jsdelivr.net/npm/marked/marked.min.js';
                    s.onload = () => {
                        try {
                            window.marked.setOptions({ gfm: true, breaks: true, headerIds: true, mangle: false, smartypants: true });
                        } catch (e) {}
                        resolve(window.marked);
                    };
                    s.onerror = reject;
                    document.head.appendChild(s);
                });
            }

            function loadHLJS() {
                return new Promise((resolve, reject) => {
                    if (window.hljs) return resolve(window.hljs);
                    const s = document.createElement('script');
                    s.src = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js';
                    s.onload = () => resolve(window.hljs);
                    s.onerror = reject;
                    document.head.appendChild(s);
                });
            }

            function parseDurationStr(s) {
                // Accept patterns like "1時間20分", "2時間", "45分", "1.5時間"
                const m = s.trim().match(/^(?:(\d+(?:\.\d+)?)\s*時間)?\s*(\d+)?\s*分?$/);
                if (!m) return null;
                let hours = m[1] ? parseFloat(m[1]) : 0;
                let minutes = m[2] ? parseInt(m[2], 10) : 0;
                // Convert decimal hours to mins if provided
                if (m[1] && String(m[1]).includes('.')) {
                    minutes += Math.round((hours - Math.trunc(hours)) * 60);
                    hours = Math.trunc(hours);
                }
                return { hours, minutes };
            }

            function fmtDuration(totalMin) {
                const h = Math.floor(totalMin / 60);
                const m = totalMin % 60;
                if (h && m) return `${h}時間${m}分`;
                if (h) return `${h}時間`;
                return `${m}分`;
            }

            function autoBuildTrainingCards(container) {
                // Build structured cards from paragraph-only content.
                const paras = Array.from(container.querySelectorAll(':scope > p'));
                if (paras.length < 3) return; // not our structure

                const isNumberLine = (t) => /^\s*\d+\s*$/.test(t);
                const isDurationLine = (t) => !!parseDurationStr(t);

                const cards = [];
                let i = 0; let seq = 0;
                while (i < paras.length) {
                    // find the start: number line or anything if first
                    if (cards.length === 0 && !isNumberLine(paras[i].textContent)) {
                        // start from beginning
                    } else if (isNumberLine(paras[i].textContent)) {
                        i++; // consume number line; number badge will come from count
                    }
                    seq += 1;
                    // title
                    if (i >= paras.length) break;
                    const title = paras[i].textContent.trim();
                    i++;
                    // optional duration as next paragraph
                    let totalMin = 0;
                    if (i < paras.length && isDurationLine(paras[i].textContent)) {
                        const d = parseDurationStr(paras[i].textContent);
                        totalMin += (d.hours * 60 + d.minutes);
                        i++;
                    }
                    // optional intro/desc if next para is not number or duration
                    const bullets = [];
                    let desc = '';
                    while (i < paras.length && !isNumberLine(paras[i].textContent)) {
                        const t = paras[i].textContent.trim();
                        if (!t) { i++; continue; }
                        const dur = parseDurationStr(t);
                        if (dur) {
                            totalMin += (dur.hours * 60 + dur.minutes);
                        } else if (!desc) {
                            // first non-duration line after title/duration → description
                            desc = t;
                        } else {
                            bullets.push(t);
                        }
                        i++;
                        // stop when next is number (start of next card) or we hit a heading element ahead
                        if (i < paras.length && isNumberLine(paras[i].textContent)) break;
                    }
                    cards.push({ seq, title, desc, totalMin, bullets });
                    // if next line is number, the while condition will break and continue
                }

                if (!cards.length) return;
                // Clear and rebuild
                container.innerHTML = '';
                cards.forEach(c => {
                    const card = document.createElement('div');
                    card.className = 'training-card';
                    const head = document.createElement('div');
                    head.className = 'tc-head';
                    const left = document.createElement('div');
                    left.className = 'tc-title';
                    const num = document.createElement('span');
                    num.className = 'tc-num';
                    num.textContent = c.seq;
                    const title = document.createElement('span');
                    title.textContent = c.title;
                    left.appendChild(num);
                    left.appendChild(title);
                    head.appendChild(left);

                    const meta = document.createElement('div');
                    meta.className = 'tc-meta';
                    if (c.totalMin) {
                        const b = document.createElement('span');
                        b.className = 'tc-badge';
                        b.textContent = `標準学習時間 ${fmtDuration(c.totalMin)}`;
                        meta.appendChild(b);
                    }
                    head.appendChild(meta);
                    card.appendChild(head);

                    if (c.desc) {
                        const d = document.createElement('p');
                        d.className = 'tc-desc';
                        d.textContent = c.desc;
                        card.appendChild(d);
                    }
                    if (c.bullets.length) {
                        const ul = document.createElement('ul');
                        ul.className = 'tc-list';
                        c.bullets.forEach(t => { const li = document.createElement('li'); li.textContent = t; ul.appendChild(li); });
                        card.appendChild(ul);
                    }
                    container.appendChild(card);
                });
            }

            function postProcessMarkdown(container) {
                // External links
                container.querySelectorAll('a').forEach(a => {
                    a.target = '_blank';
                    a.rel = 'noopener noreferrer';
                });
                // Syntax highlight
                if (window.hljs) {
                    container.querySelectorAll('pre code').forEach(el => window.hljs.highlightElement(el));
                }
                // Transform plain-paragraph training outlines into rich cards
                autoBuildTrainingCards(container);
            }

            const mdDetails = Array.from(document.querySelectorAll('#training-modal details[data-md-path]'));
            mdDetails.forEach((d) => {
                d.addEventListener('toggle', async () => {
                    if (!d.open || d.dataset.loaded) return;
                    const path = d.getAttribute('data-md-path');
                    const container = d.querySelector('.training-md-content');
                    if (!path || !container) return;
                    try {
                        const res = await fetch(path);
                        const text = await res.text();
                        await loadMarked();
                        await loadHLJS();
                        container.innerHTML = window.marked.parse(text);
                        postProcessMarkdown(container);
                        d.dataset.loaded = '1';
                    } catch (err) {
                        container.innerHTML = '<p class="text-red-600">読み込みに失敗しました。</p>';
                    }
                });
            });
        });
    </script>
</body>
</html>
